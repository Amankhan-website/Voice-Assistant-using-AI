<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voice AI Assistant</title>

<style>
  * {
  box-sizing: border-box;
}

body {
  overflow-x: hidden;
  font-family: Arial, sans-serif;
  background: #0f2027;
  color: white;
  text-align: center;
  padding: 20px;
  margin: 0;
}

h2 {
  font-size: 26px;
  margin-bottom: 20px;
}

/* MIC BUTTON */
.mic {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: none;
  font-size: 32px;
  cursor: pointer;
  background: red;
  color: white;
  box-shadow: 0 0 20px red;
}

.mic.active {
  background: green;
  box-shadow: 0 0 25px green;
}

/* INFO BOX */
.box {
  margin-top: 25px;
  background: rgba(255,255,255,0.1);
  padding: 15px;
  border-radius: 12px;
  width: 100%;
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
  word-wrap: break-word;
}

.box p {
  font-size: 16px;
}

/* INPUTS */
input {
  width: 100%;
  max-width: 320px;
  padding: 12px 16px;
  font-size: 16px;
  border-radius: 25px;
  border: 2px solid #4caf50;
  outline: none;
  background: #111;
  color: #fff;
  margin-bottom: 10px;
}

/* BUTTONS */
button {
  padding: 12px 24px;
  font-size: 16px;
  border-radius: 25px;
  border: none;
  cursor: pointer;
  background: linear-gradient(135deg, #00e676, #1de9b6);
  color: #000;
  font-weight: bold;
  transition: 0.3s;
}

button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px #00e676;
}

/* MOBILE */
@media (max-width: 600px) {
  h2 { font-size: 22px; }
  .mic { width: 70px; height: 70px; font-size: 28px; }
  .box p { font-size: 15px; }
}
</style>
</head>

<body>

<h2>ðŸŽ¤ Voice AI Assistant</h2>

<button class="mic" id="mic" onclick="startAI()">ðŸŽ¤</button>

<div class="box">
  <p><b>You said:</b> <span id="said"></span></p>
  <p><b>Response:</b></p>
  <p id="info"></p>
</div>

<div style="margin-top:30px;">
  <input id="searchInput" placeholder="Search on web...">
  <br><br>
  <button onclick="webSearch()">Search Web</button>
</div>

<script>
const micBtn = document.getElementById("mic");
const said = document.getElementById("said");
const info = document.getElementById("info");

function speak(text) {
  let msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-IN";
  window.speechSynthesis.speak(msg);
}

function startAI() {
  micBtn.classList.add("active");

  const recognition = new webkitSpeechRecognition();
  recognition.lang = "en-IN";
  recognition.start();

  recognition.onresult = function(event) {
    let text = event.results[0][0].transcript.toLowerCase();
    said.innerText = text;

    /* DATE */
    if (text.includes("date")) {
      let d = new Date().toDateString();
      let ans = "Aaj ki date " + d;
      info.innerText = ans;
      speak(ans);
      micBtn.classList.remove("active");
      return;
    }

    /* TIME */
    if (text.includes("time")) {
      let t = new Date().toLocaleTimeString();
      let ans = "Abhi time " + t;
      info.innerText = ans;
      speak(ans);
      micBtn.classList.remove("active");
      return;
    }

    /* MATH */
    let math = text
      .replace(/what is|calculate|kitna hota hai|equals|\?/gi, "")
      .replace(/plus/gi, "+")
      .replace(/minus/gi, "-")
      .replace(/into|multiply|multiplied by/gi, "*")
      .replace(/divide|divided by/gi, "/");

    try {
      if (math.match(/^[0-9+\-*/(). ]+$/)) {
        let result = eval(math);
        let ans = "Answer hai " + result;
        info.innerText = ans;
        speak(ans);
        micBtn.classList.remove("active");
        return;
      }
    } catch(e){}

    /* TEMPERATURE */
    if (text.includes("temperature") || text.includes("weather")) {
      let city = text.replace("temperature","")
                     .replace("weather","")
                     .replace("in","")
                     .trim();
      if (city === "") city = "delhi";

      fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1`)
        .then(r => r.json())
        .then(loc => {
          if (!loc.results) {
            info.innerText = "City nahi mili";
            return;
          }
          let lat = loc.results[0].latitude;
          let lon = loc.results[0].longitude;
          let place = loc.results[0].name;
          let country = loc.results[0].country;

          fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`)
            .then(r => r.json())
            .then(w => {
              let ans = `${place}, ${country} ka temperature ${w.current_weather.temperature}Â°C hai`;
              info.innerText = ans;
              speak(ans);
            });
        });
      micBtn.classList.remove("active");
      return;
    }

    /* WIKIPEDIA */
    fetch("https://en.wikipedia.org/api/rest_v1/page/summary/" + text.replace(/\s+/g, "_"))
      .then(res => res.json())
      .then(data => {
        let ans = data.extract || "Information nahi mili";
        info.innerText = ans;
        speak(ans);
        micBtn.classList.remove("active");
      })
      .catch(() => {
        info.innerText = "Error";
        micBtn.classList.remove("active");
      });
  };

  recognition.onerror = function() {
    micBtn.classList.remove("active");
  };
}

function webSearch() {
  let q = document.getElementById("searchInput").value;
  if (q.trim() === "") return alert("Kuch likho");
  window.open("https://www.google.com/search?q=" + encodeURIComponent(q), "_blank");
}
</script>

</body>
</html>

